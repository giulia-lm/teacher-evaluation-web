<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluación Docente</title>

    <!-- link a los styles -->
    <link href="../../static/css/base.css" rel="stylesheet">
    <link href="../../static/css/components.css" rel="stylesheet">
    <link href="../../static/css/layout.css" rel="stylesheet">

    <link href="../../static/css/pages/admin-dashboard.css" rel="stylesheet">

    <link rel="icon" type="image/jpg" href="../../static/css/img/admin-icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Fugaz+One&family=Orbitron:wght@400..900&family=VT323&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <a href="{{ url_for('index') }}">
              <div class="logo"><img src="../../static/css/img/admin-icon.png" width="40" height="60">
                 Evaluación Docente
            </div>
          </a>
            <ul class="nav-links">
                <li><a href="{{ url_for('logout') }}">Cerrar sesión</a></li>
                <li><a href="{{ url_for('preguntas_freq') }}">Preguntas frecuentes</a></li>

            </ul>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <ul class="mobile-nav-links">
            <li><a href="{{ url_for('logout') }}">Cerrar sesión</a></li>
            <li><a href="{{ url_for('preguntas_freq') }}">Preguntas frecuentes</a></li>
        </ul>
    </div>

<div id="toast-container"></div>
<div id="toast-container"></div>

<!-- Sección de inicio / Bienvenida -->
<section class="welcome-section">

  <div class="welcome-textBox">
    <h2 class="welcome-text">¡Bienvenidx!</h2>
  </div>

  <div class="welcome-image">
    <img src="../../static/css/img/admin-icon.png" class="avatar">
  </div>
</section>



  <h1>Panel de Administración</h1>
{% block content %}

<section class="admin-dashboard">
  <h2>Usuarixs registradxs</h2>

  <div class="filters">
  <select id="filtro-rol">
    <option value="">Todos los roles</option>
    <option value="alumnx">Alumnxs</option>
    <option value="docente">Docentes</option>
    <option value="admin">Admins</option>
  </select>

  <input type="month" id="filtro-creado">
  <button id="btn-filtrar-users">Filtrar</button>
  <button id="btn-reset-users">Reset</button>
</div>


  <table id="users-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Matrícula</th>
        <th>Rol</th>
        <th>Fecha creación</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>

    </tbody>
  </table>



<div class="admin-controls">
  <button id="btn-open-add" class="btn-primary">Agregar usuario</button>
</div>
</section>


<div id="user-modal" class="modal">
  <div class="modal-content">
    <h3 id="modal-title">Agregar usuario</h3>
    <form id="user-form">
      <input type="hidden" name="id" id="user-id">

      <label>Nombre
        <input name="name" id="user-name" required>
      </label>

      <label>Matrícula
        <input name="matricula" id="user-matricula" required>
      </label>

<label>Rol:
  <select id="user-role" name="role" required>
    <option value="">Selecciona rol</option>
    <option value="alumnx">Alumnx</option>
    <option value="docente">Docente</option>
    <option value="admin">Admin</option>
  </select>
</label>

<div id="alumnx-options" style="display:none;">
  <label>Grupo:
    <select id="alumnx-grupo" name="alumnx_grupo">
      {% for g in grupos %}
        <option value="{{ g.id }}">{{ g.name }}</option>
      {% endfor %}
    </select>
  </label>
</div>

<div id="docente-options" style="display:none;">
  <label>Materias impartidas:</label>

  {% for m in materias %}
    <label class="checkbox-container">{{ m.name }}
      <input type="checkbox" name="docente_materias" value="{{ m.id }}"> 
      <span class="checkmark"></span>
    </label>
  {% endfor %}
</div>

      <label>Contraseña
        <input type="password" id="user-password" name="password" placeholder="Dejar vacío si no hay cambios">
      </label>

      <div class="form-actions">
        <button type="submit" class="btn-primary" id="user-submit">Guardar</button>
        <button type="button" class="btn-secondary" id="user-cancel">Cancelar</button>
      </div>
    </form>
  </div>
</div>


<section class="materias-dashboard">
  <h2>Materias registradas</h2>

  <div class="filters">
  <select id="filtro-grupo">
    <option value="">Todos los grupos</option>
    {% for g in grupos %}
      <option value="{{ g.id }}">{{ g.name }}</option>
    {% endfor %}
  </select>

  <select id="filtro-docente">
    <option value="">Todos los docentes</option>
    {% for d in docentes %}
      <option value="{{ d.id }}">{{ d.name }}</option>
    {% endfor %}
  </select>

  <button id="btn-filtrar-materias">Filtrar</button>
  <button id="btn-reset-materias">Reset</button>
</div>


  <table id="materias-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Materia</th>
        <th>Docentes</th>
        <th>Grupos</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>


<div class="admin-controls">
  <button id="btn-add-materia" class="btn-primary">Agregar materia</button>
</div>
</section>

<div id="materia-modal" class="modal">
  <div class="modal-content">
    <h3 id="materia-modal-title">test</h3>
    <form id="materia-form">
      <input type="hidden" name="id" id="materia-id">

      <label>Nombre
        <input name="name" id="materia-name" required>
      </label>

<div id="docentes-options">
  <label>Docente que imparte la materia:
    <select id="docente-materia">
      {% for d in docentes %}
        <option value="{{ d.id }}">{{ d.name }}</option>
      {% endfor %}
    </select>
  </label>
</div>

<div id="grupos-options">
  <label>Grupo donde se imparte:
    <select id="grupo" name="grupo">
      {% for g in grupos %}
        <option value="{{ g.id }}">{{ g.name }}</option>
      {% endfor %}
    </select>
  </label>
</div>


      <div class="form-actions">
        <button type="submit" class="btn-primary" id="btn-save-materia">Guardar</button>
        <button type="button" class="btn-secondary" id="materia-cancel">Cancelar</button>
      </div>
    </form>
  </div>
</div>



<section class="respuestas-dashboard">
  <h2>Respuestas de Encuestas</h2>

  <div class="filters">
  <input type="text" id="filtro-form" placeholder="Nombre del formulario">
  <input type="text" id="filtro-alumno" placeholder="Nombre del alumno">
  <input type="date" id="filtro-fecha">
  <button id="btn-filtrar-respuestas">Filtrar</button>
  <button id="btn-reset-respuestas">Reset</button>
</div>



<table id="responses-table">
  <thead>
    <tr>
      <th>Nombre del Form</th>
      <th>Alumno</th>
      <th>Fecha</th>
      <th>Respuestas</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
</section>

{% endblock %}

<div class="download_res_section">
  <a href="{{ url_for('download_admin_report') }}" class="download_res_button">
    Descargar reporte de respuestas PDF
  </a>
</div>





<!-- Footer -->
  <footer class="footer">
     <div class="container">
      <div class="row">
        <div class="footer-col">
          <h4>Evaluación Docente</h4>
          <ul>
            <li><a href="{{ url_for('preguntas_freq') }}">Preguntas frecuentes</a></li>

          </ul>
        </div>
        <div class="footer-col">
          <h4>Contáctanos</h4>
          <ul>
            <li><a href="mailto:evaluaciondocente@uaem.edu.mx">evaluaciondocente@uaem.edu.mx</a></li>
            <li><a href="tel:+557770000000"> +55 (777) 000 0000 (Llamadas)</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Síguenos</h4>
          <div class="social-links">
            <a href="https://www.facebook.com/"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>
     </div>
  </footer>

<script src="{{ url_for('static', filename='js/dashboard-admin.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard-materias.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard-respuestas.js') }}"></script>


</body>
</html>